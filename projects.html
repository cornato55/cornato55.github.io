<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Collin D. Cortez</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            margin: 0;
            padding: 0;
            background-color: #121212;
        }
        header {
            background-color: #1f1f1f;
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
        }
        nav li {
            margin-right: 20px;
        }
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 300;
            transition: color 0.3s ease;
        }
        nav a:hover, nav a.active {
            color: #64b5f6;
        }
        .admin-link {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: transparent;
            color: transparent;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
            opacity: 0.1;
            transition: opacity 0.3s ease;
            text-decoration: none;
        }
        .admin-link:hover {
            opacity: 1;
            background-color: rgba(76, 175, 80, 0.8);
            color: white;
        }
        main {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .page-header {
            text-align: center;
            margin-bottom: 50px;
        }
        .page-title {
            font-size: 3em;
            color: #ffffff;
            margin-bottom: 15px;
        }
        .page-subtitle {
            color: #bdbdbd;
            font-size: 1.2em;
            max-width: 600px;
            margin: 0 auto;
        }
        .search-filter-section {
            background-color: #1f1f1f;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .search-box {
            width: 100%;
            padding: 15px 20px;
            background-color: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 16px;
            margin-bottom: 20px;
            box-sizing: border-box;
        }
        .search-box:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 0 3px rgba(100, 181, 246, 0.1);
        }
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .filter-tag {
            background-color: #2a2a2a;
            color: #e0e0e0;
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #404040;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        .filter-tag:hover, .filter-tag.active {
            background-color: #64b5f6;
            border-color: #64b5f6;
            color: white;
        }
        .project-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 14px;
            color: #bdbdbd;
        }
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }
        .project-card {
            background-color: #1f1f1f;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid #2a2a2a;
        }
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            border-color: #64b5f6;
        }
        .project-thumbnail {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #2a2a2a;
        }
        .project-content {
            padding: 25px;
        }
        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        .project-title {
            font-size: 1.4em;
            color: #ffffff;
            margin: 0;
            font-weight: 600;
        }
        .project-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
        }
        .status-planning {
            background-color: rgba(255, 152, 0, 0.2);
            color: #ff9800;
            border: 1px solid #ff9800;
        }
        .status-development {
            background-color: rgba(33, 150, 243, 0.2);
            color: #2196f3;
            border: 1px solid #2196f3;
        }
        .status-testing {
            background-color: rgba(156, 39, 176, 0.2);
            color: #9c27b0;
            border: 1px solid #9c27b0;
        }
        .status-launch {
            background-color: rgba(76, 175, 80, 0.2);
            color: #4caf50;
            border: 1px solid #4caf50;
        }
        .status-maintenance {
            background-color: rgba(158, 158, 158, 0.2);
            color: #9e9e9e;
            border: 1px solid #9e9e9e;
        }
        .project-description {
            color: #bdbdbd;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .project-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: #757575;
            margin-bottom: 15px;
        }
        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 15px;
        }
        .tech-tag {
            background-color: #2a2a2a;
            color: #64b5f6;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            border: 1px solid #404040;
        }
        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .project-tag {
            background-color: rgba(100, 181, 246, 0.1);
            color: #64b5f6;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            border: 1px solid rgba(100, 181, 246, 0.3);
        }
        .no-projects {
            text-align: center;
            color: #757575;
            font-style: italic;
            padding: 60px 20px;
            background-color: #1f1f1f;
            border-radius: 12px;
        }
        .loading {
            text-align: center;
            color: #bdbdbd;
            font-style: italic;
            padding: 40px;
        }
        footer {
            background-color: #1f1f1f;
            color: #bdbdbd;
            text-align: center;
            padding: 20px;
            margin-top: 60px;
        }
        .footer-links {
            margin-bottom: 10px;
        }
        .footer-links a {
            color: #64b5f6;
            margin: 0 10px;
            text-decoration: none;
        }
        .footer-links a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            .projects-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .page-title {
                font-size: 2.5em;
            }
            .project-stats {
                flex-direction: column;
                gap: 10px;
            }
            .filter-tags {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Me</a></li>
                <li><a href="projects.html" class="active">Projects</a></li>
                <li><a href="blog.html">Blog</a></li>
            </ul>
        </nav>
    </header>
    
    <!-- Hidden admin link -->
    <a href="admin.html" class="admin-link">🔒</a>
    
    <main>
        <div class="page-header">
            <h1 class="page-title">My Projects</h1>
            <p class="page-subtitle">
                A showcase of my work, experiments, and ongoing development projects. 
                Each project includes detailed progress updates and insights into my development process.
            </p>
        </div>

        <div class="search-filter-section">
            <input type="text" class="search-box" id="search-input" 
                   placeholder="🔍 Search projects by name, description, or technology...">
            
            <div class="filter-tags" id="filter-tags">
                <div class="filter-tag active" data-tag="all">All Projects</div>
                <div class="filter-tag" data-tag="javascript">JavaScript</div>
                <div class="filter-tag" data-tag="python">Python</div>
                <div class="filter-tag" data-tag="web-dev">Web Development</div>
                <div class="filter-tag" data-tag="automation">Automation</div>
                <div class="filter-tag" data-tag="api">API</div>
                <div class="filter-tag" data-tag="mobile">Mobile</div>
            </div>

            <div class="project-stats" id="project-stats">
                <span><strong>12</strong> Total Projects</span>
                <span><strong>3</strong> In Development</span>
                <span><strong>7</strong> Completed</span>
                <span><strong>2</strong> Planning</span>
            </div>
        </div>

        <div id="loading" class="loading">Loading projects...</div>
        
        <div class="projects-grid" id="projects-grid" style="display: none;">
            <!-- Projects will be loaded here -->
        </div>

        <div id="no-projects" class="no-projects" style="display: none;">
            <h3>No projects found</h3>
            <p>Try adjusting your search terms or filters.</p>
        </div>
    </main>

    <footer>
        <div class="footer-links">
            <a href="privacy-policy.html">Privacy Policy</a>
            <a href="terms-of-service.html">Terms of Service</a>
            <a href="contact.html">Contact</a>
        </div>
        <p>&copy; 2024 Collin D. Cortez. All rights reserved.</p>
    </footer>

    <script>
        // Configuration
        const GITHUB_USERNAME = 'cornato55';
        const REPO_NAME = 'cornato55.github.io';

        let allProjects = [];
        let filteredProjects = [];
        let currentFilter = 'all';

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadProjects();
            setupEventListeners();
        });

        async function loadProjects() {
            try {
                // Fetch projects folder from GitHub
                const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/projects`);
                
                if (!response.ok) {
                    // Projects folder doesn't exist yet
                    allProjects = [];
                    filteredProjects = [];
                    displayProjects();
                    updateStats();
                    
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('projects-grid').style.display = 'grid';
                    return;
                }

                const folders = await response.json();
                const projectFolders = folders.filter(item => item.type === 'dir');
                
                allProjects = [];
                
                // Load each project's metadata
                for (const folder of projectFolders) {
                    try {
                        // Get project.json for metadata
                        const projectResponse = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/projects/${folder.name}/project.json`);
                        
                        if (projectResponse.ok) {
                            const projectFile = await projectResponse.json();
                            const projectData = JSON.parse(atob(projectFile.content));
                            
                            // Add slug and count updates
                            projectData.slug = folder.name;
                            
                            // Try to count updates
                            try {
                                const updatesResponse = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/projects/${folder.name}/updates`);
                                if (updatesResponse.ok) {
                                    const updates = await updatesResponse.json();
                                    projectData.updateCount = updates.filter(item => item.name.endsWith('.md')).length;
                                    
                                    // Get last update date
                                    if (projectData.updateCount > 0) {
                                        const latestUpdate = updates
                                            .filter(item => item.name.endsWith('.md'))
                                            .sort((a, b) => b.name.localeCompare(a.name))[0];
                                        
                                        // Extract date from filename (YYYY-MM-DD format)
                                        const dateMatch = latestUpdate.name.match(/(\d{4}-\d{2}-\d{2})/);
                                        if (dateMatch) {
                                            projectData.lastUpdate = dateMatch[1];
                                        }
                                    }
                                } else {
                                    projectData.updateCount = 0;
                                }
                            } catch (error) {
                                projectData.updateCount = 0;
                            }
                            
                            // Ensure thumbnail uses emoji if not provided
                            if (!projectData.thumbnail || projectData.thumbnail.includes('placeholder')) {
                                projectData.thumbnail = `data:image/svg+xml,${encodeURIComponent(`
                                    <svg width="400" height="200" xmlns="http://www.w3.org/2000/svg">
                                        <rect width="400" height="200" fill="#2a2a2a"/>
                                        <text x="200" y="100" text-anchor="middle" dominant-baseline="middle" 
                                              fill="#ffffff" font-family="Arial, sans-serif" font-size="16">
                                            🚀 ${projectData.title}
                                        </text>
                                    </svg>
                                `)}`;
                            }
                            
                            allProjects.push(projectData);
                        }
                    } catch (error) {
                        console.error(`Error loading project ${folder.name}:`, error);
                    }
                }
                
                filteredProjects = [...allProjects];
                displayProjects();
                updateStats();
                updateFilterTags();
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('projects-grid').style.display = 'grid';
                
            } catch (error) {
                console.error('Error loading projects:', error);
                allProjects = [];
                filteredProjects = [];
                displayProjects();
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('projects-grid').style.display = 'grid';
            }
        }

        function setupEventListeners() {
            // Search functionality
            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', handleSearch);

            // Filter tags
            const filterTags = document.querySelectorAll('.filter-tag');
            filterTags.forEach(tag => {
                tag.addEventListener('click', () => handleFilter(tag.dataset.tag));
            });
        }

        function handleSearch() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            
            filteredProjects = allProjects.filter(project => {
                const matchesSearch = !searchTerm || 
                    project.title.toLowerCase().includes(searchTerm) ||
                    project.description.toLowerCase().includes(searchTerm) ||
                    project.tech.some(tech => tech.toLowerCase().includes(searchTerm)) ||
                    project.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                const matchesFilter = currentFilter === 'all' || 
                    project.tags.includes(currentFilter) ||
                    project.tech.some(tech => tech.toLowerCase().includes(currentFilter));
                
                return matchesSearch && matchesFilter;
            });

            displayProjects();
            updateStats();
        }

        function handleFilter(tag) {
            currentFilter = tag;
            
            // Update active filter tag
            document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-tag="${tag}"]`).classList.add('active');
            
            handleSearch(); // This will apply both search and filter
        }

        function displayProjects() {
            const grid = document.getElementById('projects-grid');
            const noProjects = document.getElementById('no-projects');

            if (filteredProjects.length === 0) {
                grid.style.display = 'none';
                noProjects.style.display = 'block';
                return;
            }

            noProjects.style.display = 'none';
            grid.style.display = 'grid';

            grid.innerHTML = filteredProjects.map(project => `
                <div class="project-card" onclick="openProject('${project.slug}')">
                    <img src="${project.thumbnail}" alt="${project.title}" class="project-thumbnail"
                         onerror="this.src='data:image/svg+xml,' + encodeURIComponent('<svg width=\\'400\\' height=\\'200\\' xmlns=\\'http://www.w3.org/2000/svg\\'><rect width=\\'400\\' height=\\'200\\' fill=\\'#2a2a2a\\'/><text x=\\'200\\' y=\\'100\\' text-anchor=\\'middle\\' dominant-baseline=\\'middle\\' fill=\\'#ffffff\\' font-family=\\'Arial, sans-serif\\' font-size=\\'16\\'>🚀 Project</text></svg>')">
                    
                    <div class="project-content">
                        <div class="project-header">
                            <h3 class="project-title">${project.title}</h3>
                            <span class="project-status status-${project.status}">${formatStatus(project.status)}</span>
                        </div>
                        
                        <div class="project-meta">
                            <span>Last updated: ${formatDate(project.lastUpdate)}</span>
                            <span>${project.updateCount} updates</span>
                        </div>
                        
                        <p class="project-description">${project.description}</p>
                        
                        <div class="project-tech">
                            ${project.tech.map(tech => `<span class="tech-tag">${tech}</span>`).join('')}
                        </div>
                        
                        <div class="project-tags">
                            ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            const total = allProjects.length;
            const development = allProjects.filter(p => p.status === 'development').length;
            const completed = allProjects.filter(p => p.status === 'launch').length;
            const planning = allProjects.filter(p => p.status === 'planning').length;

            document.getElementById('project-stats').innerHTML = `
                <span><strong>${total}</strong> Total Projects</span>
                <span><strong>${development}</strong> In Development</span>
                <span><strong>${completed}</strong> Completed</span>
                <span><strong>${planning}</strong> Planning</span>
            `;
        }

        function updateFilterTags() {
            // In real implementation, you'd generate tags dynamically from project data
            // For now, they're hardcoded in HTML
        }

        function formatStatus(status) {
            const statusMap = {
                'planning': 'Planning',
                'development': 'Development',
                'testing': 'Testing',
                'launch': 'Launched',
                'maintenance': 'Maintenance'
            };
            return statusMap[status] || status;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric',
                year: 'numeric'
            });
        }

        function openProject(slug) {
            window.location.href = `project.html?slug=${slug}`;
        }
    </script>
</body>
</html>
